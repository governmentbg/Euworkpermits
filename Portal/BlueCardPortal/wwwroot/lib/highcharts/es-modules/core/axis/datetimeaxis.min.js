"use strict";import U from"../Utilities.js";const{addEvent,getMagnitude,normalizeTickInterval,timeUnits}=U;var DateTimeAxis;!function(t){function i(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function n(){"datetime"!==this.options.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new e(this))}t.compose=function(t){if(!t.keepProps.includes("dateTime")){t.keepProps.push("dateTime");const e=t.prototype;e.getTimeTicks=i,addEvent(t,"afterSetOptions",n)}return t};class e{constructor(t){this.axis=t}normalizeTimeTickInterval(t,e){var i=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];let n=i[i.length-1],a=timeUnits[n[0]],s=n[1],o;for(o=0;o<i.length;o++)if(n=i[o],a=timeUnits[n[0]],s=n[1],i[o+1])if(t<=(a*s[s.length-1]+timeUnits[i[o+1][0]])/2)break;a===timeUnits.year&&t<5*a&&(s=[1,2,5]);e=normalizeTickInterval(t/a,s,"year"===n[0]?Math.max(getMagnitude(t/a),1):1);return{unitRange:a,count:e,unitName:n[0]}}getXDateFormat(t,e){const i=this["axis"],n=i.chart.time;return i.closestPointRange?n.getDateFormat(i.closestPointRange,t,i.options.startOfWeek,e)||n.resolveDTLFormat(e.year).main:n.resolveDTLFormat(e.day).main}}t.Additions=e}(DateTimeAxis=DateTimeAxis||{});export default DateTimeAxis;