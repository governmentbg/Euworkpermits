"use strict";import H from"../Globals.js";const composed=H["composed"];import U from"../Utilities.js";const{addEvent,defined,pick,pushUnique}=U;var ScrollbarAxis;!function(o){let t;function c(o){var i=pick(o.options&&o.options.min,o.min),t=pick(o.options&&o.options.max,o.max);return{axisMin:i,axisMax:t,scrollMin:defined(o.dataMin)?Math.min(i,o.min,o.dataMin,pick(o.threshold,1/0)):i,scrollMax:defined(o.dataMax)?Math.max(t,o.max,o.dataMax,pick(o.threshold,-1/0)):t}}function s(){var o=this,i=o.scrollbar,t=i&&!i.options.opposite,t=o.horiz?2:t?3:1;i&&(o.chart.scrollbarsOffsets=[0,0],o.chart.axisOffset[t]+=i.size+(i.options.margin||0))}function e(){const a=this;a.options&&a.options.scrollbar&&a.options.scrollbar.enabled&&(a.options.scrollbar.vertical=!a.horiz,a.options.startOnTick=a.options.endOnTick=!1,a.scrollbar=new t(a.chart.renderer,a.options.scrollbar,a.chart),addEvent(a.scrollbar,"changed",function(o){var{axisMin:i,axisMax:t,scrollMin:s,scrollMax:e}=c(a),e=e-s;let r,n;defined(i)&&defined(t)&&(n=a.horiz&&!a.reversed||!a.horiz&&a.reversed?(r=s+e*this.to,s+e*this.from):(r=s+e*(1-this.from),s+e*(1-this.to)),this.shouldUpdateExtremes(o.DOMType)?(i="mousemove"!==o.DOMType&&"touchmove"!==o.DOMType&&void 0,a.setExtremes(n,r,!0,i,o)):this.setRange(this.from,this.to))}))}function r(){const i=this,{scrollMin:o,scrollMax:t}=c(i),s=i.scrollbar,e=i.axisTitleMargin+(i.titleOffset||0),r=i.chart.scrollbarsOffsets,n=i.options.margin||0;let a,l,p;if(s&&r){if(i.horiz)i.opposite||(r[1]+=e),s.position(i.left,i.top+i.height+2+r[1]-(i.opposite?n:0),i.width,i.height),i.opposite||(r[1]+=n),a=1;else{i.opposite&&(r[0]+=e);let o;o=s.options.opposite?i.left+i.width+2+r[0]-(i.opposite?0:n):i.opposite?0:n,s.position(o,i.top,i.width,i.height),i.opposite&&(r[0]+=n),a=0}r[a]+=s.size+(s.options.margin||0),isNaN(o)||isNaN(t)||!defined(i.min)||!defined(i.max)||i.min===i.max?s.setRange(0,1):(l=(i.min-o)/(t-o),p=(i.max-o)/(t-o),i.horiz&&!i.reversed||!i.horiz&&i.reversed?s.setRange(l,p):s.setRange(1-p,1-l))}}o.compose=function(o,i){pushUnique(composed,"Axis.Scrollbar")&&(t=i,addEvent(o,"afterGetOffset",s),addEvent(o,"afterInit",e),addEvent(o,"afterRender",r))}}(ScrollbarAxis=ScrollbarAxis||{});export default ScrollbarAxis;